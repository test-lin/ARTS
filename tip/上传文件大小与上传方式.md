# 上传文件大小与上传方式

## 环境的限制
不管是什么都是会有一定的限制的。不限制也存在安全问题。

你知道你的环境能上传多大的文件吗？大概也没有多少人闲的无聊去了解吧。

今天我也是得用到这些，被问到了就回去查资料恶补回来。说说过程吧。

环境：
* Tengine/2.2.0 (nginx/1.8.1)
* PHP 7.2.0beta1 (cli)

主要能限制文件上传大小的就这两个了(如果不是负载均衡里的一台，那我所知道的就那么多了)，nginx 和 php 是分开来运行的。

用户通过浏览器访问网站域名。域名通过 dns 解析成 ip。再通过 ip 访问服务器. 默认的80 端口。而绑定这个端口的刚好是 nginx, nginx 配置的 index 默认是 index.php，而 php 文件被指定使用 php-fpm 来解析。转到 9000 端口(php-fpm默认端口)。解析完成返回响应到 nginx，nginx 再返回给用户访问的浏览器。

所有的请求都是这么一个流程。你问我为什么不讲 http 协议。不好意思。我不熟。我也还没有那么深入。

不分神了，请求到 nginx ，配置里是没有设置文件上传大小限制阿。到网上查。哦，是
client_max_body_size 设置了就可以了阿。脑子突然蹦出了一些问题。这个能放在那些 {} 里面呢。它的默认值是什么呢。有没有最大限制之类的。

也是，从使用 nginx 到现在，也没有了解过这些。我第一个想到的是找文档。但是官网全都是英文看不懂阿。找国内翻译过的吧。找到 nginx.cn 进去看文档。发现全都是分类。根本不知道自己要找的在配置在那一项。难道要手动一个个点开？不不不。我才不会那么耿直呢。 baidu 搜索 site:(nginx.cn) client_max_body_size 回车。我们的 nginx.cn 文档地址为 nginx.cn/doc

进入到页面。再 ctrl + f 搜索 client_max_body_size 找到了。完美。nonono
这还是英文。
// 语法：client_max_body_size size
syntax: client_max_body_size size
// 默认值：client_max_body_size 1m
default: client_max_body_size 1m
// 作用域：http, server, location
context: http, server, location
// 下面一大串英文。大至就是说明了。
翻译搞起。

这时我就知道了, 这个参数可以使用在 http, server, location 这3个标签下。初始值为 1M
