改价总结

订单中的修改价格，还要把优惠部分分配给各个订单商品中。实现思路其实并不难，订单商品占用订单百分几，把优惠金额按比分配下去即可。

可以我开始时把握错重点了。把关注点放在订单商品的活动属性上去了。还一次次的计算折扣活动前商品金额是多少（因为表里有存商品没有优惠前总价），就这样功能复杂化了。后面又出现一个对整个订单进行折扣的优惠券。简直焦头烂额。

其实改价改价，对的就是现有的应付金额，这个价格在订单商品表里是存在的。里面已经处理完后当前应付的金额。按照这个金额进行百分比分配就可以了 。

很多地方实现的太过于匆忙，果然是想的太少就做了的结果。